---
title: vim折叠的使用
date: 2017-02-20 20:48:17
tags: vim
categories:
    - 基础知识
    - 
password: 
---


# 背景介绍

在看代码的时候，发现当代码比较长的时候，不太容易区分代码块的边界，比如`if`的包裹范围等。之前为了查看包裹，都是直接在大括号的地方，直接使用
`%`来看结束处，一次偶然的机会在网上看到，可以通过`vim`自带的折叠特性，来把制定的代码块进行标记。现在就学习下折叠的相关特性

# 折叠介绍

## 特性设置

`VIM`代码折叠方式可以用`foldmethod`选项来设置，如:
> set foldmethod=indent

有6种方式来折叠代码

- manual
手工定义折叠

- indent
用缩进表示折叠

- expr
用表达式来定义折叠

- syntax
用语法高亮来定义折叠

- diff
对没有更改的文本进行折叠

- marker
用标志折叠

上面一共六种折叠方式，我们今天重点看最后一种-标志折叠，因为它比较适合代码块的折叠

## 相关设置

需要在`.vimrc`中添加如下配置项

```vim

" 允许折叠
set foldenable

" 标志折叠
set foldmethod=marker

" 折叠标志，这个是默认的
set foldmarker={{{,}}}

" 折叠位宽，距离边界距离
set foldcolumn=2

```


## 常用命令

**zf**
根据块创建折叠，或者对选中内容创建折叠

**zf%**
这个命令是对接符折叠,在对接符的起点执行此命令，或折叠到对接符结束的位置

**zo**
打开光标下的折叠

**zO**
打开光标下的折叠,包括嵌套折叠

**zc**
关闭光标下的折叠

**zC**
关闭光标下的折叠,包括嵌套折叠

**za**
在已经标记的折叠处打开或者关闭折叠

**zA**
在已经标记的折叠处打开或者关闭折叠，包括嵌套折叠

**zd**
删除光标下折叠

**zD**
删除光标下所有折叠,主要是对于嵌套折叠

**zR**
打开所有折叠，折叠标志不消失

**zM**
关闭所有折叠

**zE**
删除所有的折叠标签，这个比较有用，因为我们每次打开的折叠都添加了标记，相当于更改了代码，如果不删除，提交代码的时候就比较麻烦

**[z**
到当前打开折叠的开始。如果已在开始处，移到包含这个折叠的折叠开始处。

**]z**
到当前打开折叠的结束。如果已在结束处，移到包含这个折叠的折叠结束处。

**zj**
把光标移动到下一个折叠的开始处。

**zk**
把光标移动到前一个折叠的结束处。

