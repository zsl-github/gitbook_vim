---
title: 手动搜网列表名称显示异常
date: 2017-04-12 13:59:22
tags: android
categories:
    - android
    - 手动搜网
password: 
---

# 问题一

## 描述

```
手动搜网显示错误
```
![pic alt](https://github.com/zsl-github/blog/raw/master/source/picture/sou_wang_lie_biao_name_error.png)

## 问题分析

**显示处打印LOG**
在`main log`中搜索关键字`OperatorInfo`，可以看到如下内容，

```
10-26 12:23:46.194  2103  2103 D phone   : [NetworksList] networks title : CSL 2G
10-26 12:23:46.194  2103  2103 D phone   : [NetworksList]   OperatorInfo CSL/CSL/45400+2/AVAILABLE
10-26 12:23:46.194  2103  2103 D phone   : [NetworksList] networkname is empty, getNetworkTitle from ni
10-26 12:23:46.194  2103  2103 D phone   : [NetworksList] networks title : 45421 4G
10-26 12:23:46.194  2103  2103 D phone   : [NetworksList]   OperatorInfo 45421//45421+14/AVAILABLE
```
其中`OperatorInfo`对应的LOG分别是

`frameworks/base/telephony/java/com/android/internal/telephony/OperatorInfo.java `

```java
public String toString() {
    return "OperatorInfo " + mOperatorAlphaLong //名称
            + "/" + mOperatorAlphaShort //名称
            + "/" + mOperatorNumeric //mcc+mnc
            + "/" + mState; //网络是否可用
}
```
**modem 上传的搜网结果**

搜索关键字`QUERY_AVAILABLE_NETWORKS`，得到如下内容

```
10-26 12:09:07.613  2103  2193 D RILJ    : [5531]< QUERY_AVAILABLE_NETWORKS  [OperatorInfo CMHK/CMHK/45412+14/CURRENT, OperatorInfo China Mobile HK/CMHK/45412+2/AVAILABLE, OperatorInfo PCCW-HKT/PCCW-HKT/45419+14/AVAILABLE, OperatorInfo CSL/CSL/45400+14/AVAILABLE, OperatorInfo SmarTone HK/SMC HK/45406+14/AVAILABLE, OperatorInfo 3/3/45403+14/AVAILABLE, OperatorInfo 3/3/45403+3/AVAILABLE, OperatorInfo CSL/CSL/45400+3/AVAILABLE, OperatorInfo China Mobile HK/CMHK/45413+3/AVAILABLE, OperatorInfo PCCW-HKT/PCCW-HKT/45419+3/AVAILABLE, OperatorInfo SmarTone HK/SMC HK/45406+3/AVAILABLE, OperatorInfo PCCW-HKT/PCCW-HKT/45416+2/AVAILABLE, OperatorInfo CSL/CSL/45400+2/AVAILABLE, OperatorInfo 45421//45421+14/AVAILABLE] [SUB0]
```

搜网信息都是底层上报给上层的，底层又是从网络侧获取的。

