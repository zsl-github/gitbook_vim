---
title: Markdown插件之 vim-instant-markdown
date: 2017-01-06 17:31:15
tags: vim-plugin
categories:
    - vim
    - plugin
password: 
---

# 背景介绍
之前一直在用博客园写一些东西，后来迷上了`vim`，进而喜欢上了`ubuntu`系统，就舍弃了`window`，直接安装了`ubuntu`系统，这样的结果就是写博客的时候，先在`vim`上写好，然后在拷贝到博客园上面去。这时候调整格式就变得异常痛苦，包括上传附件、截图、代码格式等。最近在网上偶然得知一个叫`Markdown`的东西，传闻它可以使用简单的规则就可以实现布局的调整。这也完全符合我尽可能少使用鼠标的理念，果断就学习了下，大爱。接下来的就要找一个支持`Markdown`的编辑器了......最开始选择的是`Cmd Markdown`，发现很不错，可以在编辑的同时，预览效果。而且，我们可以在编辑的时候选择`vim`模式。不过，要吐槽一下，就是它对vim的支持很弱，就是最基本的一些移动命令，很多命令行指令不能用，更别说`vim`客制化操作了。其实`vim`本身就是可以支持`markdown`，关键是需要一个支持`markdown`的平台把它们显示出来。可喜的是，`github、gitbook`都是可以的。这样的话，平台选定了，剩下的就是预览功能了。传闻`vim`是有需要就会有相应的插件实现。所以来网上查了下，期望有相关的插件。果然不负众望，找到了一个插件，就是我们今天要说的`vim-instant-markdown`

# 插件安装跟配置
此插件跟我们普通的插件没有什么两样，直接使用我们的插件管理工具`bundle`就可以了

1. 在.vimrc中添加如下内容
```
Bundle 'suan/vim-instant-markdown'
```

2. 这时候，按说我们打开一个.md格式的文件，就会在浏览器中打开一个静态网页(不联网也行)，这个网页会显示md文件的样式。不过，我的却没有任何的反应。后来看此插件的说明文档才知道，还需要安装一个`instant-markdown-d`的东西。
在终端执行如下命令：
```
sudo npm -g install instant-markdown-d
```
其中npm是node的包管理工具，需另外安装

3. 成功安装instant-markdown-d以后，这时候就可以正常工作了。针对这个插件，其实我的诉求也很简单，就是在每次我使用vim编辑好文件，上传到github之前，预览下显示效果，确认满意以后，在上传，防止无效操作。里面唯一需要关注的就是两个
- 预览功能是默认开始的，这有个麻烦的地方就是，每次你切换会md 文件的时候，都会生成一个预览界面，感觉很不好。所以在vimrc中关闭此功能
```
" 禁止实时刷新预览
let g:instant_markdown_slow = 1
```
- 除了禁止默认预览，还建议关闭实时刷新，就是网页跟你的编辑同步。但是，考虑到我使用vim编写的时候，不可能实时去关注显示效果，也没必要。修改如下
```
" 手动打开预览界面 :InstantMarkdownPreview
let g:instant_markdown_autostart = 0
```
- 如果你想打开预览功能，只需要在md格式的文件下，使用命令InstantMarkdownPreview即可。当然，你完全可以在vimrc给此命令设置快捷方式。但是，考虑到我们几乎不会经常用到它，所以直接记住这个命令更好
```
InstantMarkdownPreview
```
## 效果
![pic alt](https://github.com/zsl-github/blog/raw/master/source/picture/mark_shot.png)

## 问题
现在这个插件还有一点问题，就是每次自己切换buffer的时候，连接都会断开，这时候需要自己再重新打开一次才行，很麻烦，后续再折腾这个吧，毕竟不影响使用

## 5.13补充
此插件目前已经不使用了。一则是因为此插件显示太麻烦，支持的也是最基本的语法；另一方面就是自己对`markdown`的语法熟悉以后，不需要实时预览的。如果真的要看效果，完全可以下载一个`md`工具来预览，更主要的是现在用了`hexo`博客框架，直接执行`hexo s`即可在浏览器预览效果了

